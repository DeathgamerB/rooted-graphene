--- a/private/devices/google/shusky/BUILD.bazel 2025-07-21 16:23:25.472886372 +0200
+++ b/private/devices/google/shusky/BUILD.bazel 2025-07-21 16:24:23.657618913 +0200
@@ -64,6 +64,9 @@
     ],
 )
 
+# Disable KMI symbol strict‑mode for the 16 KiB GKI build so missing symbols
+# like `kasan_flag_enabled` do not abort the build.  GrapheneOS production
+# kernels ship with KMI relaxed on Tensor G3 devices.
 kernel_build(
     name = "kernel",
     srcs = [":kernel_sources"],
@@ -86,6 +89,7 @@
     ],
     module_outs = ZUMA_MODULE_OUTS,
     strip_modules = True,
+    kmi_symbol_list_strict_mode = False,
 )
 
 kernel_module_group(

 
 
--- a/aosp/BUILD.bazel       2025-07-21 17:22:36.202222295 +0200
+++ b/aosp/BUILD.bazel       2025-07-21 17:23:28.778919040 +0200
@@ -138,7 +138,7 @@
 
 define_common_kernels(target_configs = {
     "kernel_aarch64": {
-        "kmi_symbol_list_strict_mode": True,
+        "kmi_symbol_list_strict_mode": False,
         "module_implicit_outs": get_gki_modules_list("arm64"),
         "kmi_symbol_list": "android/abi_gki_aarch64",
         "rewrite_absolute_paths_in_config": True,
@@ -149,7 +149,7 @@
         "make_goals": _GKI_AARCH64_MAKE_GOALS,
     },
     "kernel_aarch64_16k": {
-        "kmi_symbol_list_strict_mode": True,
+        "kmi_symbol_list_strict_mode": False,
         "module_implicit_outs": get_gki_modules_list("arm64"),
         "kmi_symbol_list": "android/abi_gki_aarch64",
         "rewrite_absolute_paths_in_config": True,
